<div class="comments-show">
  <div id="map" style="width:100%; height:400px"></div>

  <div class="spot-info">
    <p id="spot-id">ID:<%= @spot.id %></p>
    <p id="spot-name"><%= @spot.name %></p>
    <p id="spot-memo"><%= @spot.memo %></p>
    <p id="spot-address"><%= @spot.postal_code %>&nbsp;<%= @spot.region %>&nbsp;<%= @spot.address %></p>
    <p id="spot-start_time"><%= @spot.start_time %></p>
    <p id="spot-close_time"><%= @spot.close_time %></p>
    <p id="spot-hot_water"><%= @spot.hot_water %></p>
    <p id="spot-female_only"><%= @spot.female_only %></p>
    <p id="spot-rental_stroller"><%= @spot.rental_stroller %></p>
    <p id="spot-baby_chair"><%= @spot.baby_chair %></p>
    <p id="spot-kids_space"><%= @spot.kids_space %></p>
    <p id="spot-microwave"><%= @spot.microwave %></p>
    <p id="spot-sink"><%= @spot.sink %></p>
    <p id="spot-diaper_stand"><%= @spot.diaper_stand %></p>
    <p id="spot-baby_scales"><%= @spot.baby_scales %></p>
  </div>

  <p>コメント一覧</p>
  <div class="comments-area">
    <%= render partial: 'comments/index', locals: { comments: @comments, spot: @spot } %>
  </div>
  <% if user_signed_in? %>
  <%= render partial: 'comments/form', locals: { comment: @comment, spot: @spot } %>
  <% end %>
  <%= link_to '戻る', spots_path %>
  </div>
</div>

<script type="text/javascript">
  var getMap = (function() {

    function codeAddress(address) {

      // google.maps.Geocoder()コンストラクタのインスタンスを生成
      var geocoder = new google.maps.Geocoder();

      // 地図表示に関するオプション
      var mapOptions = {
        zoom: 18,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        // マウスホイールによるズーム操作を無効
        scrollwheel: false
      };

      // 地図を表示させるインスタンスを生成
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);

      // geocoder.geocode()メソッドを実行
      geocoder.geocode( { 'address': address}, function(results, status) {

        // ジオコーディングが成功した場合
        if (status == google.maps.GeocoderStatus.OK) {

          // google.maps.Map()コンストラクタに定義されているsetCenter()メソッドで
          // 変換した緯度・経度情報を地図の中心に表示
          map.setCenter(results[0].geometry.location);

          // 地図上に目印となるマーカーを設定います。
          // google.maps.Marker()コンストラクタにマーカーを設置するMapオブジェクトと
          // 変換した緯度・経度情報を渡してインスタンスを生成
          // →マーカー詳細
          var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
          });

        // ジオコーディングが成功しなかった場合
        } else {
          console.log('Geocode was not successful for the following reason: ' + status);
        }

      });

    }
    return {
    getAddress: function() {
      var adr = document.getElementById("spot-address");
      // 住所情報を取得
      var address = adr.innerHTML;
      // 取得した住所を引数に指定してcodeAddress()関数を実行
      codeAddress(address);
    }
  };
})();

  getMap.getAddress();

</script>
